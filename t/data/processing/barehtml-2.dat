#data
<p><t:barehtml msgid=hoge.fuga>
#output
<!DOCTYPE html><html><body><p>hoge.fuga</p></body></html>

#data
<p><t:barehtml msgid="hoge&fuga<">
#output
<!DOCTYPE html><html><body><p>hoge&amp;fuga&lt;</p></body></html>

#data
<t:barehtml msgID=foo>
#locale
sub html_as_components {
  return [{type => 'text', value => 'ab & <>'}];
}
#output
<!DOCTYPE html><html><body>ab &amp; &lt;&gt;</body></html>

#data
<t:barehtml msgID=foo>
#locale
sub html_as_components {
  return [{type => 'html', value => 'ab & <>'}];
}
#output
<!DOCTYPE html><html><body>ab & <></body></html>

#data
<t:barehtml msgID=foo t:parse>
  hoge&
</t:barehtml>
#locale
sub html_as_components {
  return [{type => 'html', value => 'ab & <>'},
          {type => 'field', name => 1}];
}
#output
<!DOCTYPE html><html><body>ab & <>hoge&amp;</body></html>

#data
<t:barehtml msgID=foo t:parse>
  hoge&  <t:field>&lt;
</t:barehtml>
#locale
sub html_as_components {
  return [{type => 'html', value => 'ab & <>'},
          {type => 'field', name => 2},
          {type => 'html', value => '>'},
          {type => 'field', name => 1}];
}
#output
<!DOCTYPE html><html><body>ab & <>&lt;>hoge&amp;</body></html>

#data
<t:barehtml msgID=foo t:parse msgn=5>
  hoge&  <t:field>&lt;
</t:barehtml>
#locale
sub html_n_as_components {
  return [{type => 'html', value => 'ab & <>' . $_[2]},
          {type => 'field', name => 2},
          {type => 'html', value => '>'},
          {type => 'field', name => 1}];
}
#output
<!DOCTYPE html><html><body>ab & <>5&lt;>hoge&amp;</body></html>

#data
<t:barehtml msgID=foo t:parse msgn=6-1>
  hoge&  <t:field>&lt;
</t:barehtml>
#locale
sub html_n_as_components {
  return [{type => 'html', value => 'ab & <>' . $_[2]},
          {type => 'field', name => 2},
          {type => 'html', value => '>'},
          {type => 'field', name => 1}];
}
#output
<!DOCTYPE html><html><body>ab & <>5&lt;>hoge&amp;</body></html>

#data
<t:barehtml msgid=hoge msgset=fuga>
#locale
sub for_text_set {
  $_[0]->{text_set} = $_[1];
  return $_[0];
}
sub html_as_components {
  return [{type => 'text', value => $_[1] . ' of ' . $_[0]->{text_set}}];
}
#output
<!DOCTYPE html><html><body>hoge of fuga</body></html>
